{"version":3,"file":"js/tracking-compat.js","mappings":"AAAAA,SAASC,iBACL,oBACA,WACI,IAAMC,EAASC,yCAGTC,EAAiC,uDACjCC,EAAgBL,SAASM,eAAe,wBACxCC,EAAeC,SAASC,KAAO,IAAML,EAAiC,KACtEM,EAAiBR,EAAOS,iBACxBC,EAAwBV,EAAOW,yBAC/BC,EAA2BZ,EAAOa,6BAClCC,EAAuBhB,SAASiB,cAAc,oDAG9CC,EAAyB,WAC3B,IAAMC,EAASnB,SAASiB,cAAc,yBAClCE,IAC6B,SAAzBA,EAAOC,MAAMC,SAA+C,KAAzBF,EAAOC,MAAMC,QAChDF,EAAOC,MAAMC,QAAU,QAEvBF,EAAOC,MAAMC,QAAU,OAGlC,EAEKC,EAAwB,SAAxBA,EAAkCC,GACE,SAAlCA,EAAeC,IAAI,WACnBC,YAAW,kBAAMH,EAAsBC,EAA5B,GAA6C,KAExDG,OAAOtB,GAAgCuB,KAAKpB,EAAc,IAAI,WAC1DW,GACH,GAER,EAEGR,QAA2C,IAAlBL,GAAkD,MAAjBA,GAC1DA,EAAcJ,iBAAiB,SAAS,SAAU2B,GAC9CV,IACAI,EAAsBI,OAAO,yBAChC,IAGDd,QAAyD,IAAzBI,GAAgE,MAAxBA,GACxEA,EAAqBf,iBAAiB,SAAS,SAAU2B,GACrDV,IACAI,EAAsBI,OAAO,2BAChC,IAGDZ,QAAgE,IAA7BA,GAAwE,MAA5BA,GAC/Ed,SAASC,iBAAiB,SAAS,SAAS2B,GACJA,EAAMC,OAAOC,QAvCb,iHA0ChCZ,IACAO,YAAW,WACPC,OAAOtB,GAAgCuB,KAAKpB,EAAc,IAAI,WAC1DW,GACH,GACJ,GAAE,KAEV,GAER","sources":["webpack://ppcp-compat/./resources/js/tracking-compat.js"],"sourcesContent":["document.addEventListener(\n    'DOMContentLoaded',\n    () => {\n        const config = PayPalCommerceGatewayOrderTrackingCompat;\n\n        const orderTrackingContainerId = \"ppcp_order-tracking\";\n        const orderTrackingContainerSelector = \"#ppcp_order-tracking .ppcp-tracking-column.shipments\";\n        const gzdSaveButton = document.getElementById('order-shipments-save');\n        const loadLocation = location.href + \" \" + orderTrackingContainerSelector + \">*\";\n        const gzdSyncEnabled = config.gzd_sync_enabled;\n        const wcShipmentSyncEnabled = config.wc_shipment_sync_enabled;\n        const wcShippingTaxSyncEnabled = config.wc_shipping_tax_sync_enabled;\n        const wcShipmentSaveButton = document.querySelector('#woocommerce-shipment-tracking .button-save-form');\n        const wcShipmentTaxBuyLabelButtonSelector = '.components-modal__screen-overlay .label-purchase-modal__sidebar .purchase-section button.components-button';\n\n        const toggleLoaderVisibility = function() {\n            const loader = document.querySelector('.ppcp-tracking-loader');\n            if (loader) {\n                if (loader.style.display === 'none' || loader.style.display === '') {\n                    loader.style.display = 'block';\n                } else {\n                    loader.style.display = 'none';\n                }\n            }\n        }\n\n        const waitForTrackingUpdate = function (elementToCheck) {\n            if (elementToCheck.css('display') !== 'none') {\n                setTimeout(() => waitForTrackingUpdate(elementToCheck), 100);\n            } else {\n                jQuery(orderTrackingContainerSelector).load(loadLocation, \"\", function(){\n                    toggleLoaderVisibility();\n                });\n            }\n        }\n\n        if (gzdSyncEnabled && typeof(gzdSaveButton) != 'undefined' && gzdSaveButton != null) {\n            gzdSaveButton.addEventListener('click', function (event) {\n                toggleLoaderVisibility();\n                waitForTrackingUpdate(jQuery('#order-shipments-save'));\n            })\n        }\n\n        if (wcShipmentSyncEnabled && typeof(wcShipmentSaveButton) != 'undefined' && wcShipmentSaveButton != null) {\n            wcShipmentSaveButton.addEventListener('click', function (event) {\n                toggleLoaderVisibility();\n                waitForTrackingUpdate(jQuery('#shipment-tracking-form'));\n            })\n        }\n\n        if (wcShippingTaxSyncEnabled && typeof(wcShippingTaxSyncEnabled) != 'undefined' && wcShippingTaxSyncEnabled != null) {\n            document.addEventListener('click', function(event) {\n                const wcShipmentTaxBuyLabelButton = event.target.closest(wcShipmentTaxBuyLabelButtonSelector);\n\n                if (wcShipmentTaxBuyLabelButton) {\n                    toggleLoaderVisibility();\n                    setTimeout(function () {\n                        jQuery(orderTrackingContainerSelector).load(loadLocation, \"\", function(){\n                            toggleLoaderVisibility();\n                        });\n                    }, 10000);\n                }\n            });\n        }\n    },\n);\n"],"names":["document","addEventListener","config","PayPalCommerceGatewayOrderTrackingCompat","orderTrackingContainerSelector","gzdSaveButton","getElementById","loadLocation","location","href","gzdSyncEnabled","gzd_sync_enabled","wcShipmentSyncEnabled","wc_shipment_sync_enabled","wcShippingTaxSyncEnabled","wc_shipping_tax_sync_enabled","wcShipmentSaveButton","querySelector","toggleLoaderVisibility","loader","style","display","waitForTrackingUpdate","elementToCheck","css","setTimeout","jQuery","load","event","target","closest"],"sourceRoot":""}